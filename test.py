import streamlit as st
import random

st.set_page_config(page_title="ì˜í™” ìºë¦­í„° ì‹¬ë¦¬í…ŒìŠ¤íŠ¸", page_icon="ğŸ¬", layout="centered")

st.title("ğŸ¬ ì˜í™” ìºë¦­í„° ì‹¬ë¦¬í…ŒìŠ¤íŠ¸")
st.write("ë‹¹ì‹ ì€ ì–´ë–¤ ì˜í™” ìºë¦­í„° ìœ í˜•ì¼ê¹Œìš”? ì§ˆë¬¸ì— ë‹µí•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!")

# ê²°ê³¼ ìœ í˜• ì •ì˜ (ì´ìœ  í¬í•¨)
results = {
    "íˆì–´ë¡œí˜•": "ğŸ’ª ì •ì˜ë¡­ê³  í¬ìƒì •ì‹ ì´ ê°•í•œ ë¦¬ë” íƒ€ì…!\n- ìœ„ê¸° ìƒí™©ì—ì„œ ì•ì¥ì„œë©° ëª¨ë‘ë¥¼ ì§€í‚¤ë ¤ëŠ” ì„±í–¥ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.",
    "ì•…ë‹¹í˜•": "ğŸ˜ˆ ë§¤í˜¹ì ì´ê³  ê°•ë ¬í•œ ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ê°€ì§„ íƒ€ì…!\n- ì˜ˆìƒì¹˜ ëª»í•œ ë°˜ì „ê³¼ ë…ì°½ì ì¸ ì„ íƒì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.",
    "ì½”ë¯¹í˜•": "ğŸ˜‚ ë¶„ìœ„ê¸° ë©”ì´ì»¤, ì›ƒìŒìœ¼ë¡œ ëª¨ë‘ë¥¼ ì¦ê²ê²Œ í•˜ëŠ” íƒ€ì…!\n- ëœ»ë°–ì˜ ì•„ì´ë””ì–´ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëª¨ìŠµì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.",
    "ì „ëµê°€í˜•": "ğŸ§ ë˜‘ë˜‘í•˜ê³  ì¹˜ë°€í•œ ë‘ë‡ŒíŒŒ íƒ€ì…!\n- ê³„íšì ì´ê³  ë¶„ì„ì ì¸ ì„ íƒì´ ë‘ë“œëŸ¬ì¡ŒìŠµë‹ˆë‹¤.",
    "ë¡œë§¨í‹±í˜•": "ğŸ’• ì‚¬ë‘ê³¼ ê°ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ë”°ëœ»í•œ íƒ€ì…!\n- ê°ì •ì„ ì†”ì§í•˜ê²Œ ë“œëŸ¬ë‚´ê³  íƒ€ì¸ì„ ë°°ë ¤í•˜ëŠ” ì„ íƒì´ ë§ì•˜ìŠµë‹ˆë‹¤.",
    "ë¯¸ìŠ¤í„°ë¦¬í˜•": "ğŸŒŒ ë¹„ë°€ìŠ¤ëŸ½ê³  ì‹ ë¹„ë¡œìš´ ë§¤ë ¥ì„ ê°€ì§„ íƒ€ì…!\n- ì‹ ë¹„ë¡­ê³  ì¹¨ì°©í•œ ì„±í–¥ì´ ì„ íƒì—ì„œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.",
    "ìˆœìˆ˜í˜•": "ğŸ£ ì²œì§„ë‚œë§Œí•˜ê³  ì°©í•œ ìˆœìˆ˜ íƒ€ì…!\n- ìˆœìˆ˜í•˜ê³  ë”°ëœ»í•œ ë§ˆìŒì´ ì„ íƒì—ì„œ ë“œëŸ¬ë‚¬ìŠµë‹ˆë‹¤.",
    "ì˜ˆìˆ ê°€í˜•": "ğŸ­ ì°½ì˜ì ì´ê³  ê°ê°ì ì¸ ì˜ˆìˆ ê°€ íƒ€ì…!\n- ë…ì°½ì ì´ê³  ì˜ˆìˆ ì ì¸ ì„ íƒì´ ë§ì•˜ìŠµë‹ˆë‹¤."
}

# ì§ˆë¬¸ & ì„ íƒì§€
questions = [
    ("Q1. ì˜í™” ì† ìœ„ê¸° ìƒí™©ì—ì„œ ë‚˜ëŠ”?", {
        "ëª¨ë‘ë¥¼ ìœ„í•´ ë‚˜ì„ ë‹¤": "íˆì–´ë¡œí˜•",
        "ê³„íšì„ ì„¸ì›Œ ì‹ ì¤‘í•˜ê²Œ ì›€ì§ì¸ë‹¤": "ì „ëµê°€í˜•",
        "ëœ»ë°–ì˜ ê¸°ì§€ë¡œ ìƒí™©ì„ í—¤ì³ ë‚˜ê°„ë‹¤": "ì½”ë¯¹í˜•",
        "ìƒí™©ì„ ì´ìš©í•´ ê¸°íšŒë¥¼ ë…¸ë¦°ë‹¤": "ì•…ë‹¹í˜•",
        "ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì„ ë¨¼ì € ì§€í‚¨ë‹¤": "ë¡œë§¨í‹±í˜•"
    }),
    ("Q2. ì¹œêµ¬ë“¤ì´ ë‚  ë³¼ ë•Œ ê°€ì¥ ì˜ ì–´ìš¸ë¦¬ëŠ” ë§ì€?", {
        "ë¯¿ìŒì§í•œ ë¦¬ë”": "íˆì–´ë¡œí˜•",
        "ë˜‘ë˜‘í•˜ê³  ê³„ì‚°ì ": "ì „ëµê°€í˜•",
        "ìœ ì¾Œí•˜ê³  ì¥ë‚œê¸° ë§ìŒ": "ì½”ë¯¹í˜•",
        "ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ê°•ë ¬í•¨": "ì•…ë‹¹í˜•",
        "ë”°ëœ»í•˜ê³  ê°ì„±ì ì„": "ë¡œë§¨í‹±í˜•"
    }),
    ("Q3. ì˜í™”ì—ì„œ ë‚´ê°€ ì˜ ì–´ìš¸ë¦¬ëŠ” ì¥ë¥´ëŠ”?", {
        "ì•¡ì…˜/íˆì–´ë¡œë¬¼": "íˆì–´ë¡œí˜•",
        "ìŠ¤ë¦´ëŸ¬/ì²©ë³´ë¬¼": "ì „ëµê°€í˜•",
        "ì½”ë¯¸ë”” ì˜í™”": "ì½”ë¯¹í˜•",
        "ë²”ì£„/ë¹ŒëŸ° ì˜í™”": "ì•…ë‹¹í˜•",
        "ë¡œë§¨ìŠ¤ ì˜í™”": "ë¡œë§¨í‹±í˜•"
    }),
    ("Q4. ì˜í™” ì† ë°°ê²½ì´ë‚˜ ì¥ë©´ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤ë©´, ë‹¹ì‹ ì€ ì–´ë–¤ ê³³ì„ ì¢‹ì•„í• ê¹Œ?", {
        "ëª¨ë‘ê°€ í˜ë“  ìƒí™©ì—ì„œë„ ìš©ê¸°ë¥¼ ë‚´ì•¼ í•˜ëŠ” ê³³": "íˆì–´ë¡œí˜•",
        "ì¹˜ë°€í•˜ê²Œ ê³„íšì„ ì„¸ìš°ë©° í–‰ë™í•  ìˆ˜ ìˆëŠ” ê³³": "ì „ëµê°€í˜•",
        "ëœ»ë°–ì˜ ì¼ì´ ë²Œì–´ì ¸ ì¬ë¯¸ìˆëŠ” ì‚¬ê±´ì´ ì¼ì–´ë‚˜ëŠ” ê³³": "ì½”ë¯¹í˜•",
        "ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë°˜ì „ê³¼ ê¸´ì¥ì´ ìˆëŠ” ê³³": "ì•…ë‹¹í˜•",
        "ê°ì •ì´ í’ë¶€í•˜ê³  ë”°ëœ»í•œ ë¶„ìœ„ê¸°ì˜ ì¥ì†Œ": "ë¡œë§¨í‹±í˜•"
    }),
    ("Q5. ë‚´ê°€ ì£¼ì¸ê³µì´ë¼ë©´ ì˜í™” ì† ì—­í• ì€?", {
        "ëª¨ë‘ê°€ ìœ„í—˜ì— ì²˜í–ˆì„ ë•Œ ì•ì¥ì„ ë‹¤": "íˆì–´ë¡œí˜•",
        "ìƒí™©ì„ ë¶„ì„í•˜ê³  ì™„ë²½í•˜ê²Œ ê³„íší•œë‹¤": "ì „ëµê°€í˜•",
        "ëœ»ë°–ì˜ ì•„ì´ë””ì–´ë¡œ ìœ„ê¸°ë¥¼ ëª¨ë©´í•œë‹¤": "ì½”ë¯¹í˜•",
        "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì„ ë†€ë¼ê²Œ í•  ë°˜ì „ì„ ì¤€ë¹„í•œë‹¤": "ì•…ë‹¹í˜•",
        "ê°ì •ì„ ì†”ì§í•˜ê²Œ ë“œëŸ¬ë‚´ë©° ë‹¤ë¥¸ ì‚¬ëŒì„ ìœ„ë¡œí•œë‹¤": "ë¡œë§¨í‹±í˜•"
    })
]

# ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if 'question_index' not in st.session_state:
    st.session_state.question_index = 0
if 'answers' not in st.session_state:
    st.session_state.answers = [None] * len(questions)

q_idx = st.session_state.question_index
question, options = questions[q_idx]

# ì§ˆë¬¸ ì¶œë ¥
st.subheader(question)
choice = st.radio("ì„ íƒí•˜ì„¸ìš”:", list(options.keys()), key=q_idx)
if choice:
    st.session_state.answers[q_idx] = choice

# ì´ì „/ë‹¤ìŒ ë²„íŠ¼
col1, col2 = st.columns(2)
with col1:
    if st.button("ì´ì „") and q_idx > 0:
        st.session_state.question_index -= 1
with col2:
    if st.button("ë‹¤ìŒ") and q_idx < len(questions) - 1:
        st.session_state.question_index += 1

# ë§ˆì§€ë§‰ ì§ˆë¬¸ì—ì„œ ê²°ê³¼ ë²„íŠ¼
if q_idx == len(questions) - 1:
    if st.button("ê²°ê³¼ ë³´ê¸°"):
        # ì ìˆ˜ ê³„ì‚°
        scores = {k:0 for k in results.keys()}
        for i, ans in enumerate(st.session_state.answers):
            if ans:
                scores[options[ans]] += 1 if ans in options else 0
        max_score = max(scores.values())
        top_types = [t for t, s in scores.items() if s == max_score]
        final_type = random.choice(top_types)

        st.subheader("âœ¨ ë‹¹ì‹ ì˜ ì˜í™” ìºë¦­í„° ìœ í˜•ì€?")
        st.success(results[final_type])

        # ì„ íƒí•œ ë‹µë³€ í‘œì‹œ
        st.subheader("ğŸ“ ë‹¹ì‹ ì´ ì„ íƒí•œ ë‹µë³€")
        for i, ans in enumerate(st.session_state.answers):
            st.write(f"Q{i+1}. {ans}")
