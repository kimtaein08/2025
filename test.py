import streamlit as st
import random

st.set_page_config(page_title="영화 캐릭터 심리테스트", page_icon="🎬", layout="centered")

st.title("🎬 영화 캐릭터 심리테스트")
st.write("당신은 어떤 영화 캐릭터 유형일까요? 질문에 답하고 결과를 확인해보세요!")

# 결과 유형 정의
results = {
    "히어로형": "💪 정의롭고 희생정신이 강한 리더 타입!",
    "악당형": "😈 매혹적이고 강렬한 카리스마를 가진 타입!",
    "코믹형": "😂 분위기 메이커, 웃음으로 모두를 즐겁게 하는 타입!",
    "전략가형": "🧐 똑똑하고 치밀한 두뇌파 타입!",
    "로맨틱형": "💕 사랑과 감성을 중시하는 따뜻한 타입!",
    "미스터리형": "🌌 비밀스럽고 신비로운 매력을 가진 타입!",
    "순수형": "🐣 천진난만하고 착한 순수 타입!",
    "예술가형": "🎭 창의적이고 감각적인 예술가 타입!"
}

# 질문 & 선택지 (각 선택지가 점수를 줄 캐릭터 유형 연결)
questions = [
    ("Q1. 영화 속 위기 상황에서 나는?", {
        "모두를 위해 나선다": "히어로형",
        "계획을 세워 신중하게 움직인다": "전략가형",
        "분위기를 풀고 웃음을 만든다": "코믹형",
        "기회를 노리고 행동한다": "악당형",
        "사랑하는 사람을 먼저 지킨다": "로맨틱형"
    }),
    ("Q2. 친구들이 날 볼 때 가장 잘 어울리는 말은?", {
        "믿고 따라와.": "히어로형",
        "계획대로 진행 중.": "전략가형",
        "이거 다 웃자고 한 거야~": "코믹형",
        "내가 원하는 대로 할 거야.": "악당형",
        "난 그냥 네 편이야.": "로맨틱형"
    }),
    ("Q3. 영화에서 내가 잘 어울리는 장르는?", {
        "액션/히어로물": "히어로형",
        "스릴러/첩보물": "전략가형",
        "코미디 영화": "코믹형",
        "범죄/빌런 영화": "악당형",
        "로맨스 영화": "로맨틱형"
    }),
    ("Q4. 힘들 때 나는?", {
        "끝까지 싸운다": "히어로형",
        "분석하고 계획한다": "전략가형",
        "농담으로 풀어낸다": "코믹형",
        "혼자 감정을 숨긴다": "미스터리형",
        "감정적으로 표현한다": "로맨틱형"
    }),
    ("Q5. 내가 주인공이라면 영화 속 역할은?", {
        "정의로운 구원자": "히어로형",
        "치밀한 계획자": "전략가형",
        "웃음 담당": "코믹형",
        "반전의 장본인": "악당형",
        "사랑을 전하는 자": "로맨틱형"
    })
]

# 점수 초기화
scores = {k: 0 for k in results.keys()}

# 질문 출력
for i, (q, options) in enumerate(questions):
    st.subheader(q)
    choice = st.radio("선택하세요:", list(options.keys()), key=i)
    if choice:
        scores[options[choice]] += 1

# 결과 버튼
if st.button("결과 보기"):
    max_score = max(scores.values())
    top_types = [t for t, s in scores.items() if s == max_score]
    final_type = random.choice(top_types)

    st.subheader("✨ 당신의 영화 캐릭터 유형은?")
    st.success(results[final_type])

